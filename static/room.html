<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Board</title>
    <link rel="stylesheet" href="../styles/room.css" />
    <script>
        window.onload = function () {
            let counter = 0;
            //const root = document.getElementById('root');
            const container = document.getElementById('boards-container');
            const createBoardBtn = document.getElementById('create-board-btn');

            function createBoard (){
                counter++;
                const boardWrapper = document.createElement('div');
                boardWrapper.className = 'board-wrapper';

                const boardName = document.createElement('p');
                boardName.className = 'board-name';
                boardName.appendChild(document.createTextNode(`Board ${counter}`));

                const board = document.createElement('div');
                board.className = 'board';

                const taskCreatorWrapper = document.createElement('div');
                taskCreatorWrapper.className = 'task-creator-wrapper';

                const taskCreator = document.createElement('div');
                taskCreator.className = 'task-creator';

                const inputButton = document.createElement('input');
                inputButton.className = 'add-task-btn';
                inputButton.setAttribute('type', 'button');
                inputButton.setAttribute('value', '+');

                //inputButton.addEventListener('click', function(event) {
                    //let current = event.target;
                    //let buttons = document.getElementsByClassName('add-task-btn');
                    //let taskValues = document.getElementsByClassName('task-value');

                    //for (let i = 0; i < buttons.length; i++){
                        //if (current === buttons[i])
                        //alert(taskValues[i].value);
                    //}
                //});

                const inputText = document.createElement('input');
                inputText.className = 'task-value';
                inputText.setAttribute('type', 'text');
                inputText.setAttribute('value', '');

                const tasksListWrapper = document.createElement('div');
                tasksListWrapper.className = 'tasks-list-wrapper';

                const tasksList = document.createElement('div');
                tasksList.className = 'tasks-list';

                tasksListWrapper.appendChild(tasksList);
                taskCreatorWrapper.appendChild(inputText);
                taskCreatorWrapper.insertBefore(inputButton, inputText);
                board.appendChild(tasksListWrapper);
                board.insertBefore(taskCreatorWrapper, tasksListWrapper);

                boardWrapper.appendChild(board);
                boardWrapper.insertBefore(boardName, board);


                boardWrapper.addEventListener('click', function(event){
                    let btns = document.getElementsByClassName('add-task-btn');
                    let tasksValues = document.getElementsByClassName('task-value');
                    let currentButton =  event.target;
                    let currentBoard = this;
                    console.log(this);

                    for (let i = 0; i < btns.length; i++) {
                        if (btns[i] === currentButton && tasksValues[i].value.length) {
                            let task = document.createElement('p');
                            task.className = 'task';
                            task.appendChild(document.createTextNode(tasksValues[i].value));
                            currentBoard.appendChild(task);
                            tasksValues[i].value = '';
                        }
                    }
                });

                container.appendChild(boardWrapper);
            };

            createBoardBtn.addEventListener('click', function() {
                createBoard(counter);
                createBoardBtn.removeEventListener('click', function () {
                    createBoard();
                });
            });
        }
    </script>
</head>
<body>
<div class="header">
    <input type="button" id="create-board-btn" value="Create board">
    <div class="header-right">
        <p id="user-info">Hello, User!</p>
    </div>
</div>
<div id="root">
    <div id="boards-container"></div>
</div>
</body>
</html>
